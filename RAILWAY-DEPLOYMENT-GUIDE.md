# üöÄ Railway Deployment Guide

## ‚úÖ **Pre-Deployment Checklist**

Your Twitter bot is now **READY FOR RAILWAY DEPLOYMENT** with the following features:
- ‚úÖ **Dual Authentication System**: Works with both local `auth.json` and `AUTH_JSON_BASE64` environment variable
- ‚úÖ **Fresh Authentication Data**: Captured and converted to base64
- ‚úÖ **All Components Updated**: Finder, Brain, Poster all use the new auth system
- ‚úÖ **Tested Locally**: Full pipeline tested and working

## üîß **Required Environment Variables**

Set these in your Railway project:

### **Core Authentication & APIs**
```bash
AUTH_JSON_BASE64=ewogICJjb29raWVzIjogWwogICAgewogICAgICAibmFtZSI6ICJndWVzdF9pZF9tYXJrZXRpbmciLAogICAgICAidmFsdWUiOiAidjElM0ExNzQ4NTAzMDQ4MzQ1NzcyMzYiLAogICAgICAiZG9tYWluIjogIi54LmNvbSIsCiAgICAgICJwYXRoIjogIi8iLAogICAgICAiZXhwaXJlcyI6IDE3ODMwNjMwOTEuMjcyNDMxLAogICAgICAiaHR0cE9ubHkiOiBmYWxzZSwKICAgICAgInNlY3VyZSI6IHRydWUsCiAgICAgICJzYW1lU2l0ZSI6ICJOb25lIgogICAgfSwKICAgIHsKICAgICAgIW5hbWUiOiAiZ3Vlc3RfaWRfYWRzIiwKICAgICAgInZhbHVlIjogInYxJTNBMTc0ODUwMzA0ODM0NTc3MjM2IiwKICAgICAgImRvbWFpbiI6ICIueC5jb20iLAogICAgICAicGF0aCI6ICIvIiwKICAgICAgImV4cGlyZXMiOiAxNzgzMDYzMDkxLjI3MjM5MywKICAgICAgImh0dHBPbmx5IjogZmFsc2UsCiAgICAgICJzZWN1cmUiOiB0cnVlLAogICAgICAic2FtZVNpdGUiOiAiTm9uZSIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogImd1ZXN0X2lkIiwKICAgICAgInZhbHVlIjogInYxJTNBMTc0ODUwMzA0ODM0NTc3MjM2IiwKICAgICAgImRvbWFpbiI6ICIueC5jb20iLAogICAgICAicGF0aCI6ICIvIiwKICAgICAgImV4cGlyZXMiOiAxNzgzMDYzMDQzLjY0NDU3NCwKICAgICAgImh0dHBPbmx5IjogZmFsc2UsCiAgICAgICJzZWN1cmUiOiB0cnVlLAogICAgICAic2FtZVNpdGUiOiAiTm9uZSIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogInBlcnNvbmFsaXphdGlvbl9pZCIsCiAgICAgICJ2YWx1ZSI6ICJcInYxX1NvdnZkdkw5VWhjTnZPWDdxOUhOS1E9PVwiIiwKICAgICAgImRvbWFpbiI6ICIueC5jb20iLAogICAgICAicGF0aCI6ICIvIiwKICAgICAgImV4cGlyZXMiOiAxNzgzMDYzMDQzLjc0NzM2LAogICAgICAiaHR0cE9ubHkiOiBmYWxzZSwKICAgICAgInNlY3VyZSI6IHRydWUsCiAgICAgICJzYW1lU2l0ZSI6ICJOb25lIgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAiZ3QiLAogICAgICAidmFsdWUiOiAiMTkyNzk4NzY0MDI1NjY3MTc3MyIsCiAgICAgICJkb21haW4iOiAiLnguY29tIiwKICAgICAgInBhdGgiOiAiLyIsCiAgICAgICJleHBpcmVzIjogMTc0ODUxMjA0My43NDczODgsCiAgICAgICJodHRwT25seSI6IGZhbHNlLAogICAgICAic2VjdXJlIjogdHJ1ZSwKICAgICAgInNhbWVTaXRlIjogIkxheCIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogImd1ZXN0X2lkX21hcmtldGluZyIsCiAgICAgICJ2YWx1ZSI6ICJ2MSUzQTE3NDg1MDMwNTA1NTI0NTc4NiIsCiAgICAgICJkb21haW4iOiAiLnR3aXR0ZXIuY29tIiwKICAgICAgInBhdGgiOiAiLyIsCiAgICAgICJleHBpcmVzIjogMTc4MzA2MzA0NS44MzQxNzMsCiAgICAgICJodHRwT25seSI6IGZhbHNlLAogICAgICAic2VjdXJlIjogdHJ1ZSwKICAgICAgInNhbWVTaXRlIjogIk5vbmUiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJndWVzdF9pZF9hZHMiLAogICAgICAidmFsdWUiOiAidjElM0ExNzQ4NTAzMDUwNTUyNDU3ODYiLAogICAgICAiZG9tYWluIjogIi50d2l0dGVyLmNvbSIsCiAgICAgICJwYXRoIjogIi8iLAogICAgICAiZXhwaXJlcyI6IDE3ODMwNjMwNDUuODM0MTksCiAgICAgICJodHRwT25seSI6IGZhbHNlLAogICAgICAic2VjdXJlIjogdHJ1ZSwKICAgICAgInNhbWVTaXRlIjogIk5vbmUiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJwZXJzb25hbGl6YXRpb25faWQiLAogICAgICAidmFsdWUiOiAiXCJ2MV9aQlJTVXRBU3NYcjU5Q2lPUTFRem53PT1cIiIsCiAgICAgICJkb21haW4iOiAiLnR3aXR0ZXIuY29tIiwKICAgICAgInBhdGgiOiAiLyIsCiAgICAgICJleHBpcmVzIjogMTc4MzA2MzA0NS44MzQyMTUsCiAgICAgICJodHRwT25seSI6IGZhbHNlLAogICAgICAic2VjdXJlIjogdHJ1ZSwKICAgICAgInNhbWVTaXRlIjogIk5vbmUiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJndWVzdF9pZCIsCiAgICAgICJ2YWx1ZSI6ICJ2MSUzQTE3NDg1MDMwNTA1NTI0NTc4NiIsCiAgICAgICJkb21haW4iOiAiLnR3aXR0ZXIuY29tIiwKICAgICAgInBhdGgiOiAiLyIsCiAgICAgICJleHBpcmVzIjogMTc4MzA2MzA0NS44MzQyNDYsCiAgICAgICJodHRwT25seSI6IGZhbHNlLAogICAgICAic2VjdXJlIjogdHJ1ZSwKICAgICAgInNhbWVTaXRlIjogIk5vbmUiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJfX2NmX2JtIiwKICAgICAgInZhbHVlIjogInp5eVl6Z0s1QjBGakdPaXJoQlNXSE9Pazh5MF9IV0ljbl83NTd4VFFCdFEtMTc0ODUwMzA1MC0xLjAuMS4xLTBaZGNiNE92VkNnc0tVdnN1SWhwbUhUQjV5dm1TdmRUX3U5eHh3bnFrdHBZcWxDdDRSbHNsbG5qQTJpV1VWclo5WDJCYmN3NS5sajNXUEkzbDdGazJrSmx2SWptcm90N2ZZUFp5MHhoZ0Q4IiwKICAgICAgImRvbWFpbiI6ICIudHdpdHRlci5jb20iLAogICAgICAicGF0aCI6ICIvIiwKICAgICAgImV4cGlyZXMiOiAxNzQ4NTA0ODQ1LjgzNDI3NywKICAgICAgImh0dHBPbmx5IjogdHJ1ZSwKICAgICAgInNlY3VyZSI6IHRydWUsCiAgICAgICJzYW1lU2l0ZSI6ICJOb25lIgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAia2R0IiwKICAgICAgInZhbHVlIjogIkFld2ZUbUxXd2NGSjZGcTlJd2hjVHRpeFl2OW01VVJNSFFyN3pZZFoiLAogICAgICAiZG9tYWluIjogIi54LmNvbSIsCiAgICAgICJwYXRoIjogIi8iLAogICAgICAiZXhwaXJlcyI6IDE3ODMwNjMwODguODA1ODk5LAogICAgICAiaHR0cE9ubHkiOiB0cnVlLAogICAgICAic2VjdXJlIjogdHJ1ZSwKICAgICAgInNhbWVTaXRlIjogIkxheCIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogImF1dGhfdG9rZW4iLAogICAgICAidmFsdWUiOiAiMTAyZjllMGYxMTkxNjM4MmQzMGM0MTdkNzY2ZTA3MGI5ZDA0NjM4NSIsCiAgICAgICJkb21haW4iOiAiLnguY29tIiwKICAgICAgInBhdGgiOiAiLyIsCiAgICAgICJleHBpcmVzIjogMTc4MzA2MzA4OC44MDYyNCwKICAgICAgImh0dHBPbmx5IjogdHJ1ZSwKICAgICAgInNlY3VyZSI6IHRydWUsCiAgICAgICJzYW1lU2l0ZSI6ICJOb25lIgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAiY3QwIiwKICAgICAgInZhbHVlIjogIjg1Y2JiMjkwZjFhZWEzZDI2N2UyYjgzMjY5YjJiMTM5YWMyN2JkMWRhN2E3YzQwNDkxNzRjNmExMDRlMzNmYzIwZDQ4NjQxNDhkODE1ZDYxYmEzZmViMDI1MzhjYmM3OTVmMTBjNjJkNTY0MDUwZjg2MWExMWFlNWYwNDQ5M2FlOWQ1NGI3ODYwNmE2OTUyZjkwOTljNjk2YzA3MTVmNmYiLAogICAgICAiZG9tYWluIjogIi54LmNvbSIsCiAgICAgICJwYXRoIjogIi8iLAogICAgICAiZXhwaXJlcyI6IDE3ODMwNjMwODkuMzEzMjc0LAogICAgICAiaHR0cE9ubHkiOiBmYWxzZSwKICAgICAgInNlY3VyZSI6IHRydWUsCiAgICAgICJzYW1lU2l0ZSI6ICJMYXgiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJhdHQiLAogICAgICAidmFsdWUiOiAiMS1Wc1Y3NGJRMXNTczYzQmZ6clpTOEZQNmVxYVRRUFdGZ3llM3I0TWhuIiwKICAgICAgImRvbWFpbiI6ICIueC5jb20iLAogICAgICAicGF0aCI6ICIvIiwKICAgICAgImV4cGlyZXMiOiAxNzQ4NTg5NDg5LjYxMzA2OSwKICAgICAgImh0dHBPbmx5IjogdHJ1ZSwKICAgICAgInNlY3VyZSI6IHRydWUsCiAgICAgICJzYW1lU2l0ZSI6ICJOb25lIgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAibGFuZyIsCiAgICAgICJ2YWx1ZSI6ICJlbiIsCiAgICAgICJkb21haW4iOiAieC5jb20iLAogICAgICAicGF0aCI6ICIvIiwKICAgICAgImV4cGlyZXMiOiAtMSwKICAgICAgImh0dHBPbmx5IjogZmFsc2UsCiAgICAgICJzZWN1cmUiOiBmYWxzZSwKICAgICAgInNhbWVTaXRlIjogIkxheCIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogInR3aWQiLAogICAgICAidmFsdWUiOiAidSUzRDE5MDY3MDc4NTQ2MDc2NzEyOTYiLAogICAgICAiZG9tYWluIjogIi54LmNvbSIsCiAgICAgICJwYXRoIjogIi8iLAogICAgICAiZXhwaXJlcyI6IDE3ODAwMzkwOTEuMjcyNDQxLAogICAgICAiaHR0cE9ubHkiOiBmYWxzZSwKICAgICAgInNlY3VyZSI6IHRydWUsCiAgICAgICJzYW1lU2l0ZSI6ICJOb25lIgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAiX19jZl9ibSIsCiAgICAgICJ2YWx1ZSI6ICJoRXhEN0ZERmc2cGkySjBCOERrcjM0dVB6WTZfT2FPbl9rWmxac2dKaGVJLTE3NDg1MDMwOTYtMS4wLjEuMS1KUXNEUHBQZ2tYa0h0OXVLZHpLdVJQVUYuMEFjZHBHTEVUV3RqUzZQcmhWaFM2WThHODd6NUN1VVQ0cXpQMEF0ajdQOUFwaG5qQ1pMa1NJbXpOdENSR3NSNGg0aFJZaHdaVG4xODhlX1JGcyIsCiAgICAgICJkb21haW4iOiAiLnguY29tIiwKICAgICAgInBhdGgiOiAiLyIsCiAgICAgICJleHBpcmVzIjogMTc0ODUwNDg5MS4zMjkzNzEsCiAgICAgICJodHRwT25seSI6IHRydWUsCiAgICAgICJzZWN1cmUiOiB0cnVlLAogICAgICAic2FtZVNpdGUiOiAiTm9uZSIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogIklERSIsCiAgICAgICJ2YWx1ZSI6ICJBSFdxVFVuVlN5YWdiWmRrM0h2N2FtQ0M2WVdkajNOejdSVnNMUlBJdEotOHh1SXpPVkFkUDkwbThVaER4Wi1JT240IiwKICAgICAgImRvbWFpbiI6ICIuZG91YmxlY2xpY2submV0IiwKICAgICAgInBhdGgiOiAiLyIsCiAgICAgICJleHBpcmVzIjogMTc4MzA2MzA5MS41MDQ3MzEsCiAgICAgICJodHRwT25seSI6IHRydWUsCiAgICAgICJzZWN1cmUiOiB0cnVlLAogICAgICAic2FtZVNpdGUiOiAiTm9uZSIKICAgIH0KICBdLAogICJvcmlnaW5zIjogWwogICAgewogICAgICAib3JpZ2luIjogImh0dHBzOi8veC5jb20iLAogICAgICAibG9jYWxTdG9yYWdlIjogWwogICAgICAgIHsKICAgICAgICAgICJuYW1lIjogInZvbHVtZSIsCiAgICAgICAgICAidmFsdWUiOiAiMSIKICAgICAgICB9CiAgICAgIF0KICAgIH0KICBDCN0=

OPENAI_API_KEY=your_openai_api_key_here
SUPABASE_URL=your_supabase_url_here
SUPABASE_ANON_KEY=your_supabase_anon_key_here
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here
REDIS_URL=your_railway_redis_url_here
```

### **Optional Configuration**
```bash
# Bot Behavior
VIEW_THRESHOLD=1500
FINDER_SEARCH_MIN_FAVES=25
POST_RATE_MS=60000
BRAIN_PERSONA_FILENAME=persona_2.md

# Playwright (will use AUTH_JSON_BASE64 if set)
PLAYWRIGHT_STORAGE=/data/auth.json
```

## üöÄ **Deployment Steps**

### **1. Push to Railway**
```bash
# Make sure all changes are committed
git add .
git commit -m "Ready for Railway deployment with dual auth system"
git push origin main
```

### **2. Deploy to Railway**
1. Go to your Railway project dashboard
2. Connect your GitHub repository
3. Set all the environment variables listed above
4. Deploy!

### **3. Verify Deployment**
Check the logs for these success messages:
```
üîê Using AUTH_JSON_BASE64 environment variable for authentication
‚úÖ Successfully decoded and saved authentication data to temp file
Finder Agent: Supabase client initialized successfully.
```

## üîÑ **How the Authentication Works**

### **Development (Local)**
- Uses local `auth.json` file
- Perfect for testing and development

### **Production (Railway)**
- Uses `AUTH_JSON_BASE64` environment variable
- Automatically decodes and creates temporary auth file
- Cleans up temporary files after use

## üõ† **Maintenance**

### **Refreshing Authentication**
When Twitter authentication expires:

1. **Run locally:**
   ```bash
   node playwright-auth-inspector.js
   ```

2. **Generate new base64:**
   ```bash
   node test-auth-simple.js
   ```

3. **Update Railway environment variable:**
   - Copy the new base64 string from the test output
   - Update `AUTH_JSON_BASE64` in Railway dashboard
   - Redeploy

## üéØ **What Happens on Railway**

1. **Build Phase**: `npm run build` compiles TypeScript
2. **Start Phase**: `npm run reply-job` runs the complete pipeline:
   - Clears queues
   - Finds tweets (using AUTH_JSON_BASE64)
   - Generates replies with AI
   - Posts replies to Twitter
   - Logs activity to Supabase

## üîç **Monitoring**

Watch the Railway logs for:
- ‚úÖ Authentication success messages
- ‚úÖ Tweet finding and processing
- ‚úÖ Reply generation and posting
- ‚ùå Any error messages

## üéâ **You're Ready!**

Your bot is now fully prepared for Railway deployment with:
- ‚úÖ Fresh authentication data
- ‚úÖ Dual authentication system (local + production)
- ‚úÖ All components tested and working
- ‚úÖ Proper Railway configuration
- ‚úÖ Complete environment variable setup 